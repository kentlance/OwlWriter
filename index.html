<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OwlWriter</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="transition-colors duration-300 flex flex-col h-screen">
    <div
      id="controlBarHoverTrigger"
      class="absolute top-0 left-0 w-full"
      style="height: 20px; z-index: 40"
    ></div>

    <div id="overlay" class="hidden"></div>

    <div id="controlBar" class="p-4 flex justify-end relative z-50">
      <div class="relative inline-block text-left mr-2">
        <button
          id="exportButton"
          class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 shadow-md hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400"
          aria-haspopup="true"
          aria-expanded="true"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
            ></path>
          </svg>
        </button>
        <div
          id="exportDropdown"
          class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none"
          role="menu"
          aria-orientation="vertical"
          aria-labelledby="exportButton"
          style="display: none"
        >
          <div class="py-1" role="none">
            <a
              href="#"
              id="exportTxt"
              class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"
              role="menuitem"
              >Export as TXT</a
            >
            <a
              href="#"
              id="exportHtml"
              class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"
              role="menuitem"
              >Export as HTML</a
            >
            <a
              href="#"
              id="exportMd"
              class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"
              role="menuitem"
              >Export as MD</a
            >
          </div>
        </div>
      </div>
      <button
        id="markdownViewButton"
        class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 shadow-md hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400 mr-2"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
          ></path>
        </svg>
      </button>

      <button
        id="helpButton"
        class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 shadow-md hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400 mr-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"
          />
        </svg>
      </button>

      <button
        id="settingsButton"
        class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 shadow-md hover:shadow-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-400 mr-2"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
          ></path>
        </svg>
      </button>
    </div>

    <div class="flex-grow flex items-center justify-center p-4 md:p-8 relative">
      <div class="w-full max-w-4xl h-full flex flex-col">
        <textarea
          id="writingArea"
          class="flex-grow p-6 md:p-10 leading-relaxed resize-none rounded-lg shadow-xl border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 transition-all duration-300 z-10"
          placeholder="Write anything..."
        ></textarea>

        <div
          id="markdownOutput"
          class="flex-grow p-6 md:p-10 overflow-y-auto rounded-lg shadow-xl border border-gray-300 dark:border-gray-700 prose dark:prose-invert text-left"
          style="display: none"
        ></div>

        <div
          id="statusBar"
          class="mt-4 p-3 rounded-lg shadow-lg flex justify-end text-sm z-10"
        >
          <span id="wordCount" class="mr-4">Words: 0</span>
          <span id="charCount">Characters: 0</span>
        </div>
      </div>
    </div>

    <div
      id="markdownShortcutsPanel"
      class="bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 transition-colors duration-300 overflow-y-auto"
    >
      <h2
        class="text-xl font-semibold mb-4 border-b pb-2 border-gray-200 dark:border-gray-700"
      >
        Markdown Shortcuts
      </h2>
      <ul class="list-disc pl-5">
        <li class="mb-2">
          <strong class="font-medium">Bold:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + B</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or **text**)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Italic:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + I</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or *text*)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Link:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + K</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400">
            (or [text](url))</span
          >
        </li>
        <li class="mb-2">
          <strong class="font-medium">Inline Code:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + E</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400">
            (or ``` code ```)</span
          >
        </li>
        <li class="mb-2">
          <strong class="font-medium">Heading 1:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + H</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or # Heading)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Unordered List:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + L</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or - item)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Ordered List:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + 1</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or 1. item)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Blockquote:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + Q</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or > quote)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Code Block:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + Alt + C</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400">
            (or `` ```language ```` `)</span
          >
        </li>
        <li class="mb-2">
          <strong class="font-medium">Horizontal Rule:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + Alt + H</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or ---)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Strikethrough:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + Alt + S</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400"> (or ~~text~~)</span>
        </li>
        <li class="mb-2">
          <strong class="font-medium">Image:</strong>
          <div>
            <span class="font-mono">Ctrl/Cmd + Alt + I</span>
          </div>
          <span class="text-gray-500 dark:text-gray-400">
            (or ![Alt Text](url))</span
          >
        </li>
      </ul>
    </div>

    <div
      id="settingsPanel"
      class="bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 transition-colors duration-300 overflow-y-auto"
    >
      <h2
        class="text-xl font-semibold mb-4 border-b pb-2 border-gray-200 dark:border-gray-700"
      >
        Settings
      </h2>

      <div class="mb-6 pb-4 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-3">Writing Area</h3>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium">Font Size</label>
            <button
              id="resetFontSize"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner flex items-center space-x-2"
          >
            <input
              type="range"
              id="fontSizeSlider"
              min="12"
              max="32"
              value="18"
              class="w-full h-2 rounded-lg appearance-none cursor-pointer range-accent-color"
            />
            <span
              id="fontSizeValue"
              class="text-sm font-semibold w-10 text-right"
              >18px</span
            >
          </div>
        </div>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium">Background Color</label>
            <button
              id="resetWritingAreaBgColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="writingAreaBgColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#282b49"
            />
          </div>
        </div>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium">Text Color</label>
            <button
              id="resetWritingAreaTextColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="writingAreaTextColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#f0f0f0"
            />
          </div>
        </div>
      </div>
      <div class="mb-6 pb-4 border-b border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold mb-3">App Style</h3>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium">Accent Color</label>
            <button
              id="resetAccentColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="accentColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#64b5f6"
            />
          </div>
        </div>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium"
              >App Background Color</label
            >
            <button
              id="resetBgColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="bgColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#1c1f3b"
            />
          </div>
        </div>

        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium">App Text Color</label>
            <button
              id="resetAppTextColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="appTextColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#e0e0e0"
            />
          </div>
        </div>
        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <label class="block text-sm font-medium"
              >Markdown View Text Color</label
            >
            <button
              id="resetMarkdownViewTextColor"
              class="text-xs text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200"
            >
              Reset
            </button>
          </div>
          <div
            class="flex items-center p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <input
              type="color"
              id="markdownViewTextColorPicker"
              class="w-full h-10 border border-gray-300 dark:border-gray-700 rounded-md cursor-pointer"
              value="#e0e0e0"
            />
          </div>
        </div>
      </div>
      <div class="mb-6 pb-4">
        <h3 class="text-lg font-semibold mb-3">App Functionality</h3>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-2"
            >Control Bar Visibility</label
          >
          <div
            class="flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <span>Hide on Hover</span>
            <label class="toggle-switch">
              <input type="checkbox" id="hideControlBarToggle" />
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-2"
            >Word/Char Count Panel</label
          >
          <div
            class="flex items-center justify-between p-2 rounded-lg bg-gray-50 dark:bg-gray-700 shadow-inner"
          >
            <span>Show Panel</span>
            <label class="toggle-switch">
              <input type="checkbox" id="wordCountToggleCheckbox" checked />
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>
      <button
        id="resetAllColors"
        class="mt-6 w-full py-2 px-4 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-red-400"
      >
        Reset All to Default
      </button>

      <p class="text-sm text-gray-500 dark:text-gray-400 mt-4">
        More settings coming soon!
      </p>
    </div>

    <script type="module" src="scripts/main.js"></script>
    <script type="module" src="scripts/markdown.js"></script>
    <script type="module" src="scripts/colors.js"></script>
    <script type="module" src="scripts/export.js"></script>
  </body>
</html>
